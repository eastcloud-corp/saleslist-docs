# クライアント企業リストエクスポート UI 設計

## 背景と目的
- クライアント詳細ページから、該当クライアントに紐づく案件企業リスト（ProjectCompany）を CSV としてダウンロードできるようにする。
- 既に API 側には `/clients/{id}/export-companies/` が実装済み（`saleslist-backend` コミット `d5332fb`）。
- フロントエンドからの操作導線と UX を整備し、ユーザーが簡単に利用できるようにする。

## 対象画面
- `/clients/[id]`（ClientDetailContent）
  - 現在の「基本情報」タブのヘッダ部分に、企業選択画面へのリンクや編集ボタンが並んでいる。

## 要件
1. エクスポートの発火
   - クライアント詳細ページ上のアクション群に「企業リストをエクスポート」ボタンを配置。
   - ボタンクリックで API `GET /clients/{id}/export-companies/` を叩き、CSV をダウンロード。
2. 権限/制限
   - 現段階では権限による制御は不要（要件追加がある場合はロールチェックを検討）。
   - API 呼び出し中はボタンを `disabled` にして多重クリックを防止。
3. エラー/通知
   - 成功時: トーストで「エクスポート完了」と表示。
   - 失敗時: トーストを `destructive` で表示し、サーバーから返るエラーメッセージを表示。
4. CSV の保存名
   - `client-{client.id}-companies.csv` のようにクライアントIDを含める。
5. i18n
   - 現状の UI が日本語なので、日本語ラベル（例: `企業リストをエクスポート`, `エクスポート中...`）。

## 実装ポイント
- `saleslist-front/app/clients/[id]/page.tsx`
  - 既に `handleExportCompanies` 関数とボタンを実装済みだが、ダウンロードユーティリティが HTMLAnchor を使うため `downloadCSV` を再利用。
  - API クライアントは `apiClient.get` を使用。
  - トースト用に `useToast` を利用。
- `saleslist-front/lib/api-config.ts`
  - `CLIENT_EXPORT_COMPANIES` は既に追加済み。
- バックエンド API は実装済みのため追加作業不要。

## UX プロトタイプ
```
[企業リストをエクスポート] ボタン  ->  API 呼び出し -> ダウンロード -> トースト通知
```

## テスト観点
- 正常系: ボタン押下で CSV をダウンロードし、成功トーストが表示。
- エラー系: サーバーエラー時にアラートトースト（メッセージ表示）。
- ダブルクリック: 押下中はボタン disabled。
- ボタンが存在する権限（現状は全ユーザー）。

## 今後の拡張余地
- 権限（管理者のみなど）
- CSV 項目を画面から選択できるようにする
- ダウンロード履歴の記録
